import streamlit as st
from streamlit_player import st_player


def check_password_level2():
    """Returns `True` if the user had the correct password for level 1."""


    if "level2_unlocked" in st.session_state:
        return st.session_state["level2_unlocked"]

    st.write("")
    st.text("""
        I speak in four steps though I have no feet,
        I hand you keys unseen so your device can meet,
        My MAC knows your name, yet I roam through the air,
        I lease you a spot, but I’m never there to spare.
        I broadcast my quest when I’m searching alone,
        I keep conflicts at bay though it’s not my home.
        And silent I stand while networks heed my decree—
        What am I, this helper, that sets your address free?""")

    password_input = st.text_input(
        "",
        type="password",
        key="password_input_level2"
    )

    if st.button("Submit", key="submit_level2"):
        if password_input.lower() == st.secrets["password_level2"]:
            st.session_state["level2_unlocked"] = True
            return True
        else:
            st.error("😕 Not today...")
            return False


    return False

def check_password_level1():
    """Returns `True` if the user had the correct password for level 2."""
    if "level1_unlocked" in st.session_state:
        return st.session_state["level1_unlocked"]

    
    if "level1_attempts" not in st.session_state:
        st.session_state["level1_attempts"] = 0

    st.image("img.png")


    if st.session_state["level1_attempts"] == 1:
        st.info("💡 Hint: Descarca poza")


    if st.session_state["level1_attempts"] == 3:
        st.info("💡 Hint: Raspunsul este format din 4 litere")


    password_input = st.text_input(
        "",
        type="password",
        key="password_input_level1"
    )

    if st.button("Submit", key="submit_level1"):
        if password_input.lower() == st.secrets["password_level1"]:
            st.session_state["level1_unlocked"] = True

            st.session_state["level1_attempts"] = 0
            return True
        else:

            st.session_state["level1_attempts"] += 1
            st.error("😕 Not today...")
            return False


    return False

def check_password_level3():
    """Returns `True` if the user had the correct password for level 3."""


    if "level3_unlocked" in st.session_state:
        return st.session_state["level3_unlocked"]

    with st.container():
        st.markdown("""
        <style>
        .quote-box {
            border-left: 3px solid #777;
            padding: 10px 15px;
            margin: 20px 0;
            background-color: #f9f9f9;
            font-family: 'Georgia', serif;
            color: #333;
        }
        .quote-text {
            font-size: 1.1rem;
            font-style: italic;
            line-height: 1.5;
        }
        </style>
        <div class="quote-box">
            <p class="quote-text">Când lumea devine nesigură, întoarce-te la esență - acolo unde <b>binarul</b> marchează granița dintre rațiune si iubire, și vei găsi <b>imaginea</b> ințelepciunii.</p>
        </div>
        """, unsafe_allow_html=True)


    binary_code = "10001001 01010000 01001110 01000111 00001101 00001010 00011010 00001010 00000000 00000000 00000000 00001101 01001001 01001000 01000100 01010010 00000000 00000000 00000001 00101100 00000000 00000000 00000001 00101100 00001000 00000110 00000000 00000000 00000000 01111001 01111101 10001110 01110101 00000000 00000000 00000000 00000100 01100111 01000001 01001101 01000001 00000000 00000000 10110001 10001111 00001011 11111100 01100001 00000101 00000000 00000000 00000000 00100000 01100011 01001000 01010010 01001101 00000000 00000000 01111010 00100110 00000000 00000000 10000000 10000100 00000000 00000000 11111010 00000000 00000000 00000000 10000000 11101000 00000000 00000000 01110101 00110000 00000000 00000000 11101010 01100000 00000000 00000000 00111010 10011000 00000000 00000000 00010111 01110000 10011100 10111010 01010001 00111100 00000000 00000000 00000000 00000110 01100010 01001011 01000111 01000100 00000000 00000000 00000000 00000000 00000000 00000000 11111001 01000011 10111011 01111111 00000000 00000000 00000000 00001001 01110000 01001000 01011001 01110011 00000000 00000000 00000000 01100000 00000000 00000000 00000000 01100000 00000000 11110000 01101011 01000010 11001111 00000000 00000000 00000110 10011001 01001001 01000100 01000001 01010100 01111000 11011010 11101101 11011101 01000001 01101110 11100011 00111000 00010000 01000000 01010001 01100111 00110000 00110111 00001000 10010010 11111011 10011111 00101111 10001011 01011100 11000001 10110011 11101010 01100101 10001111 00000010 10110000 11101001 11100010 01010111 10111111 10110111 10110111 01001101 11011001 11110010 00000111 00010111 00000101 11101010 11101101 11111001 01111100 00111110 00011111 00000000 00000001 11111111 01001100 00101111 00000000 11100000 10100111 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 11111110 10011101 01011110 11000000 00101111 11101111 11101111 11101111 10001111 11101111 11101111 11101111 11101001 01100101 01101100 11110011 01111100 00111110 10110111 10111110 11111111 11011011 11011011 11011011 11010010 11100111 11101111 01111110 11111101 10010101 11011101 11011111 11001111 10010101 11010101 11101011 01110111 11111111 10111110 10000110 00011101 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 11000111 11001100 01100001 01011101 11111001 11111010 11111010 01111010 01111100 01111100 01111100 01001100 00101111 11100011 10110111 01010110 11100111 01110000 01010110 11100111 10000000 01010110 01001101 11001111 01101001 10101101 11001110 01110001 10101101 01011110 11011111 01101110 01110111 10111111 01111111 01011111 11000101 00001110 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 10001100 11001100 00011100 11010110 10010101 11111010 00011100 11001111 11101010 11111011 10101111 10111110 01111110 11111010 00111100 10101101 11010101 11110101 11101101 10111110 10111110 11011101 11101010 11110111 11101111 10101011 11011000 01100001 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 01110001 10011011 00111001 10101100 10111010 11010011 11100111 01110000 01001110 10011111 10000011 10111010 11001011 10011100 00010001 11111111 11001111 00001110 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 01110011 01011000 10000111 10011000 00111110 01101111 01101010 01111010 10001110 01101001 11110111 01111001 01011100 10100111 01011111 00111111 00111111 01100011 10000111 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 11000110 01101101 11100110 10110000 11101010 01110011 00110100 10111011 11001111 11000011 10011010 10011110 01010011 11011010 01111101 10011110 11010110 11101010 11111010 10100111 10011111 01011011 01011000 10111111 01111111 01011111 11000101 00001110 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 10001100 11001100 00011100 11010110 11100111 11100111 11100111 11110100 00010010 01000110 11101101 10011110 00100011 10011010 01111110 11101110 11100000 11110100 11111010 01110111 11111011 11011011 11101111 11011111 00111111 11000101 00001110 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 10001100 10110111 10100111 10000011 01111000 00010010 01110110 11001111 00011001 10011101 01111110 00011011 01001100 11001111 01111001 01110001 00000110 00111011 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 10001110 00111001 00001111 11101011 11110100 11110011 10001100 01001110 00111111 10001111 11101001 11110100 11110101 11010101 10011111 00101011 00111000 00111101 00000111 00110110 11111101 11111010 01010011 11011000 01100001 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 01110001 11001100 00011100 11010110 11110100 10011100 11001100 11101110 11110111 10101111 10101111 11101111 11001010 11110100 00011100 11001111 11110100 11100111 10101111 10111010 11001011 10011100 11010100 01101110 01110110 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00011100 00110011 10000111 01110101 11111010 00011100 11001010 11110100 10011100 11010101 11101001 11010111 10110111 11111011 10111100 10101101 11111010 10011100 11011000 11101110 11110101 11010101 11101111 10111111 10011111 10110010 11000011 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 11100011 10011000 00111001 10101100 11101001 00111001 10010001 11111010 10011100 11001111 11101110 00111001 10011110 11101001 11101011 10011111 00111110 10001111 01101100 11111010 10111001 10000001 10111011 01010101 11100110 10111000 11101100 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00111000 01100110 00001110 10101011 01111110 10011110 11010010 11101001 01110011 00111000 10101011 01110011 00110100 10100111 10101111 01111111 11111010 10111001 10001111 10111011 11101101 00111110 10101111 11101100 10010100 00111001 10101011 00101011 01110110 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00011100 00110011 10000111 01110101 01100101 11110111 00011100 11010000 11110100 10011100 11001111 11101001 10011111 01111111 11111010 11111010 01010111 01001101 11011111 00111111 10101011 10100110 00111111 11111111 01010101 11101100 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 01111000 01111011 01001110 00001111 11000000 11111100 01110100 10100001 11110001 11110011 10001110 10100110 10111111 11100110 11101001 11100111 00001110 10011110 00111110 00000111 00110100 01111101 11011110 11011001 11110100 10011100 01100001 10000101 00011101 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 11000111 10011100 10000111 01110101 11111010 01111001 01001001 11010011 01110011 01001000 10100111 11001111 11101001 01001100 11001111 11001001 01001101 01111111 00111111 10100111 10101111 11101111 11001010 11101001 11111111 10111111 01011111 11101100 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 11001000 10011100 10000111 01110101 01111001 00100001 11110001 11110011 10001010 10100110 11101101 10111110 00001101 11101010 01110011 01011010 11010011 01111111 10010011 10111011 01011111 11011111 01001111 11011001 01100001 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 01110001 10011011 11110011 10110000 11101010 01110011 01000100 11010011 11101011 10011011 01111110 00101110 11100011 11101110 11011111 01111111 11110111 11110101 01001101 01111111 01111111 01111111 00001011 00111011 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 10001110 00111001 00001111 10101011 01111110 01011110 11010010 10101010 11010011 11001111 00110011 10111010 11111011 01111001 01011111 10011110 01011011 11011000 01100000 10000111 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 11000110 00110001 11100111 01100001 10101101 01011010 10011101 01010011 10011001 10011110 11000011 01011001 01111101 11111111 01010101 10100111 10101111 01101111 11110111 11110101 10011101 00111110 11100111 10110111 01111011 01111101 01010111 01001110 11111001 01111101 11101101 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 10111000 11001101 00011100 11010110 10010101 11011101 01110011 00101100 10100111 10011111 01010111 10110101 11111010 11111001 10100111 11001111 10011001 01001101 10011111 00110111 10110101 10111010 10111110 11101001 11110111 00111111 01100101 11001110 11101010 10001010 00011101 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 11000111 11001100 01100001 11101101 10011110 00010011 10011010 01011110 11011111 10010101 11101001 00111001 10101110 11010011 11100111 10110100 10100110 01001101 11111111 11111110 10101011 11101011 10101011 01111111 11111111 10111111 11011000 01100001 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 01110001 11001100 00011100 11010110 11111011 11111011 11111011 11100011 11111011 11111011 01111011 01111010 00011001 11011011 01001100 11001111 01010001 01001101 10011111 10010111 01110100 11110111 00111001 00100001 11001111 00010101 01111100 00001101 00111011 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 10001110 10011001 11000011 10111010 11110010 11110101 11110101 11110101 11111000 11111000 11111000 10011000 01011110 11000110 01101111 10101101 11001110 10010001 10101101 11001110 00101001 01001101 10011111 00100111 10110110 10111010 10111110 11010011 11001111 10011011 10111010 00110010 00111101 11100111 01110100 11111010 00011100 11011110 10011111 01100010 10000111 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 01000110 01100110 00001110 11101011 01001010 01111101 11001110 01100110 01110101 11111101 11010011 11100111 01001001 10011101 01111110 11011110 11010101 11101010 11111010 11101010 11101011 10111111 00001011 00111011 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 01101110 00110011 10000111 01110101 01110111 10111011 11001111 11001011 10011010 10011110 01100011 10111011 11111011 01110011 11111101 10100110 10111111 11011111 10111011 10110000 11000011 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 11000011 00011100 00010110 10001111 11000111 01100011 11111111 10011100 11010110 11110100 11101011 10100111 11100111 10101000 10100110 00111111 01111111 11110111 11111010 01011110 11000101 00001110 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 10001100 11011011 11001100 01100001 01010101 11100110 01001000 01001110 00110101 00111101 01100111 00110100 01111101 01111101 10101011 11101011 10011111 00111110 11101111 01101011 11110111 10011100 11010111 00101001 10111111 10101111 00011101 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10011001 00111001 10101100 11001111 11001111 11001111 11101001 00100101 10001100 10011010 10011110 10010011 10011001 01111110 10101110 11100001 11101010 11111010 10100110 10101111 01111111 01111010 01001110 01101011 11110101 11111010 01001110 01100001 10000111 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 10000110 01100000 00000001 00011001 10000010 00000101 01100100 00001000 00010110 10010000 00100001 01011000 01000000 11000110 11011011 10110011 00110010 10000000 00000001 11111100 11110101 11101100 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 00001100 11000001 00000010 00110010 00000100 00001011 11001000 00010000 00101100 00100000 01000011 10110000 10000000 10001100 11111111 00000000 01000100 01000001 01110110 00010101 11000010 11010110 11010000 00111000 00000000 00000000 00000000 00100101 01110100 01000101 01011000 01110100 01100100 01100001 01110100 01100101 00111010 01100011 01110010 01100101 01100001 01110100 01100101 00000000 00110010 00110000 00110010 00110101 00101101 00110000 00110101 00101101 00110000 00111001 01010100 00110000 00111000 00111010 00110101 00110110 00111010 00110101 00110001 00101011 00110000 00110000 00111010 00110000 00110000 01101100 00111001 00011000 11101110 00000000 00000000 00000000 00100101 01110100 01000101 01011000 01110100 01100100 01100001 01110100 01100101 00111010 01101101 01101111 01100100 01101001 01100110 01111001 00000000 00110010 00110000 00110010 00110101 00101101 00110000 00110101 00101101 00110000 00111001 01010100 00110000 00111000 00111010 00110101 00110110 00111010 00110101 00110001 00101011 00110000 00110000 00111010 00110000 00110000 00011101 01100100 10100000 01010010 00000000 00000000 00000000 00000000 01001001 01000101 01001110 01000100 10101110 01000010 01100000 10000010"
    st.markdown("""
    <style>
    .code-container {
        margin-bottom: 20px;
        max-width: 100%;
    }
    .scrollable-code {
        overflow-x: auto;
        white-space: nowrap;
        background-color: #f0f0f0;
        border-radius: 5px;
        border: 1px solid #ddd;
        padding: 10px 15px;
        margin-bottom: 5px;
        max-height: 60px;
    }
    .binary-code {
        font-family: monospace;
        font-size: 1.1rem;
        user-select: all;
        display: inline-block;
    }
    .copy-hint {
        font-size: 0.8rem;
        color: #666;
    }
    </style>
    <div class="code-container">
        <div class="scrollable-code" onclick="navigator.clipboard.writeText('0000111010101'); this.style.backgroundColor='#d1ffd1'; setTimeout(() => this.style.backgroundColor='#f0f0f0', 1000);">
            <div class="binary-code">""" + binary_code + """</div>
        </div>
        <div class="copy-hint">👆 Click to copy to clipboard</div>
    </div>
    """, unsafe_allow_html=True)
    password_input = st.text_input(
        "Care este destinatia?",
        type="password",
        key="password_input_level3"
    )

    if st.button("Submit", key="submit_level3"):
        if password_input.lower() == st.secrets["password_level3"]:
            st.session_state["level3_unlocked"] = True
            st.experimental_rerun()
        else:
            st.error("😕 Not today...")
            return False


    return False

# Initialize session state
if "current_level" not in st.session_state:
    st.session_state["current_level"] = 1


if "show_final_offer" not in st.session_state:
    st.session_state["show_final_offer"] = False

# Main app
if st.session_state["show_final_offer"]:
    st.title("I'm gonna make you an offer you can't refuse")


    st_player(st.secrets['youtube_link'], loop=True, play_inline=True)
else:

    if st.session_state["current_level"] == 1:
        st.title("În oglinda vremii, reflexia copilăriei așteaptă să fie dezvăluită")
    elif st.session_state["current_level"] == 2:
        st.title("La început a fost doar o adresă")
    elif st.session_state["current_level"] == 3:
        st.title("Destinația")

# Handle level 1
if st.session_state["current_level"] == 1 and not st.session_state["show_final_offer"]:
    if check_password_level1():

        st.success("🎉 Răspuns corect! Dar oare unde duce drumul?!")

        st.markdown("""
        <style>
        .friendship-text {
            background-color: #f0f8ff;
            border: 1px solid #a6d5fa;
            border-radius: 10px;
            padding: 25px;
            font-family: 'Georgia', serif;
            color: #4a4a4a;
            line-height: 1.6;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 20px 0;
            position: relative;
        }
        .friendship-text:before, .friendship-text:after {
            content: '✿';
            font-size: 24px;
            color: #7eb6ff;
            position: absolute;
            opacity: 0.7;
        }
        .friendship-text:before {
            top: 10px;
            left: 15px;
        }
        .friendship-text:after {
            bottom: 10px;
            right: 15px;
        }
        .friendship-text p {
            margin-bottom: 15px;
            font-size: 18px;
        }
        .friendship-text .first-letter {
            font-size: 28px;
            font-weight: bold;
            color: #5e8ec4;
        }
        .friendship-text .highlight {
            font-style: italic;
            color: #5e8ec4;
        }
        </style>
        """, unsafe_allow_html=True)


        first_letter = st.secrets.level1_text_p1[0]
        rest_of_text = st.secrets.level1_text_p1[1:]
        second_paragraph = st.secrets.level1_text_p2

        html_content = f"""
        <div class="friendship-text">
            <p><span class="first-letter">{first_letter}</span>{rest_of_text}</p>
            <p>{second_paragraph}</p>
        </div>
        """
        st.markdown(html_content, unsafe_allow_html=True)

        with st.container():
            st.balloons()


            if st.button("Drumul"):
                st.session_state["current_level"] = 2
                st.experimental_rerun()

# Handle level 2
elif st.session_state["current_level"] == 2 and not st.session_state["show_final_offer"]:
    if check_password_level2():

        st.success("🎉 Răspuns corect! Dar care este destinația?")

        st.markdown("""
        <style>
        .romantic-memory {
            background-color: #fff5f5;
            border: 1px solid #ffccd5;
            border-radius: 10px;
            padding: 25px;
            font-family: 'Georgia', serif;
            color: #4a4a4a;
            line-height: 1.6;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 20px 0;
            position: relative;
        }
        .romantic-memory:before, .romantic-memory:after {
            content: '❦';
            font-size: 24px;
            color: #d8a1a7;
            position: absolute;
            opacity: 0.7;
        }
        .romantic-memory:before {
            top: 10px;
            left: 15px;
        }
        .romantic-memory:after {
            bottom: 10px;
            right: 15px;
        }
        .romantic-memory p {
            margin-bottom: 15px;
            font-size: 18px;
        }
        .romantic-memory .emphasis {
            font-style: italic;
            color: #b25d69;
        }
        </style>
        """, unsafe_allow_html=True)


        paragraph1 = st.secrets.level2_text_p1


        paragraph2_text = st.secrets.level2_text_p2

        paragraph2 = paragraph2_text.replace("O dragoste pură", "<span class=\"emphasis\">O dragoste pură</span>")


        html_content = f"""
        <div class="romantic-memory">
            <p>{paragraph1}</p>
            <p>{paragraph2}</p>

        </div>
        """
        st.markdown(html_content, unsafe_allow_html=True)
        with st.container():
            st.balloons()


            if st.button("Destinatia"):
                st.session_state["current_level"] = 3
                st.experimental_rerun()

# Handle level 3
elif st.session_state["current_level"] == 3 and not st.session_state["show_final_offer"]:
    if check_password_level3():
        st.success("🎉 Răspuns corect! Nicăieri nu e ca acasă.")
        with st.container():

            st.markdown("""
            <style>
            .couple-memory {
                background-color: #fdf1ec;
                border: 1px solid #ffccd5;
                border-radius: 10px;
                padding: 25px;
                font-family: 'Georgia', serif;
                color: #4a4a4a;
                line-height: 1.6;
                text-align: center;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                margin: 20px 0;
                position: relative;
            }
            .couple-memory:before, .couple-memory:after {
                content: '🏚';
                font-size: 24px;
                color: #d8a1a7;
                position: absolute;
                opacity: 0.7;
            }
            .couple-memory:before {
                top: 10px;
                left: 15px;
            }
            .couple-memory:after {
                bottom: 10px;
                right: 15px;
            }
            .couple-memory p {
                margin-bottom: 15px;
                font-size: 18px;
            }
            .couple-memory .emphasis {
                font-style: italic;
                color: #b25d69;
            }
            </style>
            """, unsafe_allow_html=True)


            paragraph1 = st.secrets.level3_text_p1
            paragraph1 = paragraph1.replace("“Acasă”", "<span class=\"emphasis\">“Acasă”</span>")
            
            paragraph2 = st.secrets.level3_text_p2





            html_content = f"""
            <div class="couple-memory">
                <p>{paragraph1}</p>
                <p>{paragraph2}</p>
            </div>
            """
            st.markdown(html_content, unsafe_allow_html=True)

            if st.button("Acasa"):

                st.session_state["show_final_offer"] = True
                st.experimental_rerun()

